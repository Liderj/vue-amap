<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>vue-amap 一款基于Vue和高德地图的地图库</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="assets/home/normalize.css" media="screen">
    <link rel="stylesheet" type="text/css" href="assets/home/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="assets/home/github-light.css" media="screen">
  </head>
  <body>
    <canvas id="canvas"></canvas>


  </body>

  <style>
    body{
      background-color: #159957;
      background-image: linear-gradient(120deg, #155799, #159957);
    }
  </style>

  <script>
  (function() {
    var boomLength, ctx, descending, ele, height, love_bomb_tomb, setStar, star_num, stars, width;

    stars = [];

    star_num = 5;

    love_bomb_tomb = [];

    width = 500;

    height = 300;

    ele = document.getElementById("canvas");

    ctx = ele.getContext('2d');

    ele.setAttribute("height", height);

    ele.setAttribute("width", width);

    setStar = function(index) {
        return stars[index] = [Math.random() * width, Math.random() / 10 * height, (Math.random() * 20 + 80) / 100, (Math.random() + 1) / 2 * 6, Math.sin(Math.random() * Math.PI / 8)];
    };

    descending = function(former, latter) {
        return latter[0] - former[0];
    };

    boomLength = 0;


    var reqAnimFrame =  window.mozRequestAnimationFrame    ||
                    window.webkitRequestAnimationFrame ||
                    window.msRequestAnimationFrame     ||
                    window.oRequestAnimationFrame;

    var animate = function () {
      reqAnimFrame(animate);

      var bomb, degree, factor, i, j, k, l, m, new_x, new_y, p, pi_in_degree, random_heart_style, random_y_diff, ratio, ref, ref1, ref2, rest_amount, speed, theta;
      ctx.clearRect(0, 0, width, height);
      for (i = j = 0, ref = star_num; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
          if (stars[i] == null) {
              setStar(i);
          }
          if (!(stars[i][0] < width && stars[i][1] < height)) {
              setStar(i);
          }
          ratio = stars[i][4];
          speed = stars[i][3];
          new_x = stars[i][0] += speed * ratio;
          new_y = stars[i][1] += speed;
          random_y_diff = stars[i][2];
          for (p = k = 0; k <= 100; p = ++k) {
              ctx.beginPath();
              ctx.strokeStyle = "rgba(255, 255, 230," + (1 - p / 100) + ")";
              ctx.moveTo(new_x - random_y_diff * p * ratio, new_y - random_y_diff * p);
              ctx.lineTo(new_x - random_y_diff * (p - 1) * ratio, new_y - random_y_diff * (p - 1));
              ctx.stroke();
          }
      }
      stars.sort(descending);
      for (i = l = 0, ref1 = star_num - 1; 0 <= ref1 ? l < ref1 : l > ref1; i = 0 <= ref1 ? ++l : --l) {
          if (Math.abs(stars[i][0] - stars[i + 1][0]) < 3) {
              if (Math.abs(stars[i][1] - stars[i + 1][1]) < 3) {
                  love_bomb_tomb[boomLength++] = [50, stars[i][0], stars[i][1]];
                  setStar(i);
                  setStar(i + 1);
              }
          }
      }
    };

    animate();



}).call(this);
  </script>
</html>
